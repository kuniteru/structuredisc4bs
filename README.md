# Structure Disc for BleemSync
BleemSync用に、ファイルやディレクトリ構造の整備と日本語のデータベースを作成するツールです。
## 特徴
- ディスクイメージ(.cue & .bin)を1つのフォルダにまとめて入れておくことで、それを基に自動で情報を取得し、日本語のデータベースを作成します
- ディスクイメージを1つのフォルダにまとめておくことで、それを基にBleemSync用にディレクトリを構成します<br />
すなわち、面倒なファイル配置をする必要がありません
- 複数ディスクにも対応しています
- BleemSync.exeを実行する必要はありません

## 動作確認済環境
- Windows 10
- PowerShell 5.1

## Installation
1. PATHの通っているフォルダか、structuredisc4bs.ps1ファイルと同じフォルダに、System.Data.SQLiteの.NET Framework用のライブラリを配置する<br />
https://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki<br />
(当方での動作確認は sqlite-netFx46-static-binary-x64-2015-1.0.109.0.zip でおこないました。)
    - SQLite.Interop.dll
    - System.Data.SQLite.dll
    - System.Data.SQLite.xml
1. 同じフォルダに、pcsx.cfg ファイルを配置する
<br />
(BleemSyncのサンプルデータにあるイメージディレクトリなどからコピーしてくるとよいでしょう)

## 使い方の流れ
1. 適当な1つのフォルダに、すべてのコンテンツのディスクイメージ(.cueおよび.bin)を置きます。<br />
その際、ディスクイメージのファイル名は、ディスク番号にしてください。<br />
※ このファイル名を基にコンテンツ情報を取得しているので、ファイル名のつけ方には間違いがないように注意してください<br />
例）SLPS-00001.cue, SLPS-00001.bin
    - アルファベットと数字の区切りは、アルファベットと数字以外であれば何でもかまいません
    - ディスクごとにcueとbinとで、ファイル名は同じにしてください
    - 大文字小文字はどちらでもかまいませんが、同じディスクのcueとbinでは、そろっている必要があります
1. ディスクイメージから、コンテンツの情報を自動でcsvに作成する<br />
※ ファイルの順序や自動取得した情報を自分で修正することができるようにすることを目的としています
    - PowerShellで、structuredisc4bs.ps1に以下の引数を渡して実行します
        - -Command createCSV
        - -DiscDir<br />
          ディスクイメージ(*.cue & *.bin)が置かれているフォルダ
        - -csv (必須)<br />
          出力するCSVファイル名
1. 必要に応じて作成されたCSVファイルを修正する
1. CSVファイルを基として、ディスクイメージなどのファイル配置とデータベースへの登録をする
    - PowerShellで、structuredisc4bs.ps1に以下の引数を渡して実行します
        - -Command applyDisc
        - -DiscDir<br />
          ディスクイメージが置かれているフォルダ
        - -OutDir<br />
          BleemSyncのファイル群が置かれているルートフォルダ<br />
          (以下のフォルダたちが配置されているフォルダ)
            - 028c18a9-ec4b-4632-b2cf-d4e20f252e8f
            - Games
            - lolhack
            - System
        - -csv (必須)
          コンテンツ情報が書かれているCSVファイルのパス

## 謝罪
- ヘルプ組み込んでなかったり、エラーハンドリングいい加減だったりと、イロイロと雑で、ごめんなさい<br />
  バックアップなどをしてからの利用をおすすめします

## 今後やろうかと考えていること
- ヘルプの組み込み
- エラーハンドリングをきちんと
- cue, binのファイル名をディスク番号にせずとも動作するようにする
- データベース(regional.db)ファイルが存在しない状態でも動作するようにする<br />
  (データベースファイルの新規作成)
- BleemSyncの初期サンプルデータの削除機能

## 利用規約
当スクリプトの利用などによっていかなる損害が生じた場合でも作成者は一切の責任を負いません。<br />
発生した損害は利用者の責任とします。<br />
また、このスクリプトを活用して(過失あるいはその他を含む)違法行為あるいは不法行為を行ってはいけません。<br />
これに該当する行為を行った場合、当方は一切の責任を負わず、利用者あるいは違法行為、不法行為を行った者の責任とします。